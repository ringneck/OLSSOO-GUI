<!--
 * Asterisk-GUI	- an Asterisk configuration interface
 *
 * Manage T1/E1/BRI trunks
 *
 * Copyright (C) 2007-2008, Digium, Inc.
 *
 * Pari Nannapaneni <pari@digium.com>
 *
 * See http://www.asterisk.org for more information about
 * the Asterisk project. Please do not directly contact
 * any of the maintainers of this project for assistance;
 * the project provides a web site, mailing lists and IRC
 * channels for your use.
 *
 * This program is free software, distributed under the terms of
 * the GNU General Public License Version 2. See the LICENSE file
 * at the top of the source tree.
 *
-->
<script src="js/jquery.js"></script>
<script src="js/astman.js"></script>
<link href="stylesheets/schwing.css" media="all" rel="Stylesheet" type="text/css" />
<style type="text/css">

	#table_DigitalTrunks_list {
		border: 0px solid #666666;
		margin-top: 8px;
		padding : 1px;
		width: 96%;
	}

	#table_DigitalTrunks_list {
		border: 1px solid #666666;
		margin-top: 5px;
		margin-bottom:10px;
		width: 96%;
		text-align: center;
		padding : 1px;
	}
	#table_DigitalTrunks_list tr.frow { background: #6b79a5; color: #CED7EF; }
	#table_DigitalTrunks_list tr.frow td{ font-weight:bold; }
	#table_DigitalTrunks_list tr td{ padding : 3px; }
	#table_DigitalTrunks_list tr.even { background: #DFDFDF; }
	#table_DigitalTrunks_list tr.odd{ background: #FFFFFF; }
	#table_DigitalTrunks_list tr.even:hover, #table_DigitalTrunks_list tr.odd:hover {
		background: #a8b6e5;
		cursor: default;
	}


</style>
<script>

var load_DigitalTrunksTable = function(){
	var addCell = ASTGUI.domActions.tr_addCell; // temporarily store the function
	(function(){ // add first row
		var newRow = DOM_table_DigitalTrunks_list.insertRow(-1);
		newRow.className = "frow";
		addCell( newRow , { html:'', width:'15px' } );
		addCell( newRow , { html:'Trunk'} );
		addCell( newRow , { html:'Signalling'} );
		addCell( newRow , { html:'Channels'} );
		addCell( newRow , { html:''} );
	})();	

	(function (){
		var c = parent.sessionData.pbxinfo['trunks']['pri'] ;
		for(var d in c){if(c.hasOwnProperty(d)){
			var newRow = DOM_table_DigitalTrunks_list.insertRow(-1);
			newRow.className = ((DOM_table_DigitalTrunks_list.rows.length)%2==1)?'odd':'even';
			addCell( newRow , { html:'', width:'15px' });
			addCell( newRow , { html: c[d]['trunkname'] });
			addCell( newRow , { html: c[d]['signalling'] }); // 
			addCell( newRow , { html: c[d]['zapchan'] });
			addCell( newRow , { html:''} );
		}}


		var c = parent.sessionData.pbxinfo['trunks']['bri'] ;
		for(var d in c){if(c.hasOwnProperty(d)){
			var newRow = DOM_table_DigitalTrunks_list.insertRow(-1);
			newRow.className = ((DOM_table_DigitalTrunks_list.rows.length)%2==1)?'odd':'even';
			addCell( newRow , { html:'', width:'15px' });
			addCell( newRow , { html: c[d]['trunkname'] });
			addCell( newRow , { html: 'mISDN' });
			addCell( newRow , { html: c[d]['ports'] });
			addCell( newRow , { html:''} );
		}}
	})();

	if( DOM_table_DigitalTrunks_list.rows.length == 1  ){
		ASTGUI.domActions.clear_table(DOM_table_DigitalTrunks_list);
		var newRow = DOM_table_DigitalTrunks_list.insertRow(-1);
		addCell( newRow , { html: "<BR> <B>No T1/E1/BRI Trunks found !!</B><BR> Your digital hardware can be configured using the 'Configure Hardware', 'mISDN Config' sections of the GUI.<BR><BR>" } );
	}
};



var localajaxinit = function(){
	top.document.title = 'Manage PRI/BRI Trunks ' ;
	ASTGUI.tabbedOptions( _$('tabbedMenu') , [
		{url:'trunks_analog.html', desc:'Analog Trunks'} ,
		{url:'trunks_sps.html', desc:'Service Providers'} ,
		{url:'trunks_voip.html', desc:'VOIP Trunks'} ,
		{url:'#', desc:'T1/E1/BRI Trunks', selected:true }
	]);
	// show digital trunks in table_DigitalTrunks_list - parent.sessionData.pbxinfo['trunks']['pri']
	DOM_table_DigitalTrunks_list = _$('table_DigitalTrunks_list');

	load_DigitalTrunksTable();
}



</script>
<body bgcolor="EFEFEF">
<div class="iframeTitleBar"> 
	Digital(T1/E1/BRI) Trunks
	<span style="cursor: pointer; cursor: hand;" onclick="window.location.reload();" >&nbsp;<img src="images/refresh.png" title=" Refresh " border=0 >&nbsp;</span>
</div>

<div id="tabbedMenu"></div>

<table id='table_DigitalTrunks_list' cellpadding=0 cellspacing=0 border=0 align=center></table>

</body>