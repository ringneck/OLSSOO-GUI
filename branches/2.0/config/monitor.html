<!--
 * Asterisk-GUI	- an Asterisk configuration interface
 *
 * Monitor active calls ( WORK IN PROGRESS )
 *
 * Copyright (C) 2006-2008, Digium, Inc.
 *
 * Mark Spencer <markster@digium.com>
 * Pari Nannapaneni <pari@digium.com>
 *
 * See http://www.asterisk.org for more information about
 * the Asterisk project. Please do not directly contact
 * any of the maintainers of this project for assistance;
 * the project provides a web site, mailing lists and IRC
 * channels for your use.
 *
 * This program is free software, distributed under the terms of
 * the GNU General Public License Version 2. See the LICENSE file
 * at the top of the source tree.
 *
-->
<script src="js/jquery.js"></script>
<script src="js/astman.js"></script>
<link href="stylesheets/schwing.css" media="all" rel="Stylesheet" type="text/css" />
<style type="text/css">

</style>
<script>

var callMonitor = {
	waitEventLog : [],
};

callMonitor.waitForNewEvents = function(){
	var me = this;
	$.ajax({
		type: "GET",
		url: ASTGUI.paths.rawman,
		data: 'action=waitevent' ,
		success: function(op){
			me.waitEventLog.push(op);
			var b = document.createElement('div');
			b.innerHTML = '<PRE>' + op + '</PRE><HR>';
			_$('waitevent_Log').appendChild(b);
			me.waitForNewEvents();
		}
	});
};


var localajaxinit = function(){
	top.document.title = 'Monitor active calls' ;
	callMonitor.waitForNewEvents();
};

</script>
<body bgcolor="EFEFEF">
<div class="iframeTitleBar"> 
	Monitor Active Calls
	<span class='refresh_icon' onclick="window.location.reload();" >&nbsp;<img src="images/refresh.png" title=" Refresh " border=0 >&nbsp;</span>
</div>

<div id='waitevent_Log'>

</div>

</body>
